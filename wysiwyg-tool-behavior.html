<script>
	WYSIWYG = window.WYSIWYG || {};

	WYSIWYG.ToolBehavior = {
		listeners: {
			click: '_click'
		},
		properties: {
			active: {
				type: Boolean,
				value: false,
				computed: 'queryCommandState(range0.*, value, commonAncestorPath)',
				reflectToAttribute: true,
				observer: '_activeChanged'
			},
			canRedo: {
				type: Boolean,
				value: false,
				readOnly: true,
				observer: '_canRedoChanged'
			},
			canUndo: {
				type: Boolean,
				value: false,
				readOnly: true,
				observer: '_canUndoChanged'
			},
			command: {
				type: String,
				value: '',
				readOnly: true,
				observer: '_commandChanged'
			},
			disabled: {
				type: Boolean,
				value: true,
				computed: '_computeDisabled(range0.*, value, commonAncestorPath)',
				reflectToAttribute: true,
				observer: '_disabledChanged'
			},
			keysTarget: {
				type: Object,
				value: function () {
				  return this;
				},
				readOnly: true,
				observer: '_keysTargetChanged'
			},
			range0: {
				type: Object,
				value: null,
				readOnly: true,
				observer: '_range0Changed'
			},
			selectedLink: {
				type: Object,
				value: null,
				readOnly: true,
				observer: '_selectedLinkChanged'
			},
			value: {
				type: String,
				value: '',
				readOnly: true,
				observer: '_valueChanged'
			},
			commonAncestorPath: {
				type: Array,
				value: null,
				readOnly: true,
				observer: '_commonAncestorPathChanged'
			}
		},
		execCommand: function (event) {
			if (this.disabled || !this.range0) return false;
			document.execCommand(this.command);
		},
		queryCommandEnabled: function () {
			if (!this.range0) return false;
			return document.queryCommandEnabled(this.command);
		},
		queryCommandState: function () {
			if (!this.range0) return false;

			try {
			  return document.queryCommandState(this.command);
			} catch (ignore) {
			  return false;
			}
		},
		_activeChanged: function () {},
		_canRedoChanged: function () {},
		_canUndoChanged: function () {},
		_click: function () {
		  this.fire('restore-selection');
		  this.async(this.execCommand, 10);
		},
		_commandChanged: function () {},
		_commonAncestorPathChanged: function () {},
		_computeDisabled: function () {
			return !this.queryCommandEnabled();
		},
		_disabledChanged: function () {},
		_keysTargetChanged: function () {},
		_range0Changed: function () {},
		_selectedLinkChanged: function () {},
		_valueChanged: function () {}
	};
</script>